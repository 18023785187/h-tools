!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.h=e():t.h=e()}(self,(function(){return(()=>{"use strict";var t={d:(e,n)=>{for(var i in n)t.o(n,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:n[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};function n(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function o(t,e){if("function"==typeof t)t.call(this,e);else if("object"===i(t))for(var n=0;n<t.length;++n)o.call(this,t[n],e)}t.r(e),t.d(e,{EventListener:()=>r,LazyLoad:()=>v,Slide:()=>A,Waterfall:()=>b});var r=function(){function t(e,n){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._handle={set:function(t,e,n){var o=!Reflect.has(t,e);return Reflect.set(t,e,n),o&&i._add(e),!0},deleteProperty:function(t,e){return Reflect.has(t,e)&&i._delete(e),Reflect.deleteProperty(t,e)}},this.on=new Proxy(null!=n?n:{},this._handle),this._el=e,this._listenerMap={},this._add()}var e,i,r;return e=t,(i=[{key:"el",get:function(){return this._el}},{key:"_createListener",value:function(t){var e=this;return function(n){o.call(this,e.on[t],n)}}},{key:"_add",value:function(t){if(t){var e=this._createListener(t);this.el.addEventListener(t,e,!1),this._listenerMap[t]=e}else for(var n=Object.keys(this.on),i=0;i<n.length;++i){var o=n[i],r=this._createListener(o);this.el.addEventListener(o,r,!1),this._listenerMap[o]=r}}},{key:"_delete",value:function(t){if(t)this.el.removeEventListener(t,this._listenerMap[t],!1),delete this._listenerMap[t];else for(var e=Object.keys(this._listenerMap),n=0;n<e.length;++n){var i=e[n];this.el.removeEventListener(i,this._listenerMap[i],!1),delete this._listenerMap[i]}}},{key:"reflect",value:function(t){this._delete(),this.on=new Proxy(t,this._handle),this._add()}}])&&n(e.prototype,i),r&&n(e,r),t}();function a(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var s=function(){function t(e,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.el=e,this.src=n||"",this.options=i}var e,n,i;return e=t,n=[{key:"_getDOMRect",value:function(t){return t.getBoundingClientRect()}},{key:"_checkInView",value:function(){var t=this.options,e=t.viewport,n=t.preload,i=this._getDOMRect(this.el),o=i.top,r=i.right,a=i.bottom,s=i.left,l=e.w;return o<e.h*n&&a>0&&s<l*n&&r>0}},{key:"_loadImg",value:function(t,e){if(this._checkInView()){var n=new Image;return n.src=this.src,n.onload=t,n.onerror=e,!0}return!1}},{key:"load",value:function(){var t=this,e=this.options.attempt,n=function(){t.el.src=t.src};return this._loadImg(n,(function i(o){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;r!==e?t._loadImg(n,i.bind(t,o,++r)):t.el.src=t.options.error}))}}],n&&a(e.prototype,n),i&&a(e,i),t}();function l(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var h=function t(e){c(this,t),this.value=e,this.next=null},u=function(){function t(){c(this,t),this.head=null,this.tail=null,this.length=0}var e,n,i;return e=t,(n=[{key:"add",value:function(t){if(this.head){var e=new h(t);this.tail.next=e,this.tail=e}else this.head=new h(t),this.tail=this.head;++this.length}},{key:"remove",value:function(t){for(var e=null,n=this.head;(null==n?void 0:n.value)!==t;)e=n,n=n.next;n&&(n===this.head?(this.head=n.next,!this.head&&(this.tail=null)):(e.next=n.next,!n.next&&(this.tail=e)),--this.length)}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"forEach",value:function(t){for(var e=this.head,n=0;e;)t.call(this,e.value,n),e=e.next,++n}}])&&l(e.prototype,n),i&&l(e,i),t}();function d(t,e){return e=e[0].toUpperCase()+e.substring(1),Object.prototype.toString.call(t)==="[object ".concat(e,"]")}function f(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=!0,i=null;return function(){for(var o=this,r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];null!=i&&window.clearTimeout(i),n?(n=!1,t.apply(this,[].concat(a)),window.setTimeout((function(){n=!0}),e)):i=window.setTimeout((function(){t.apply(o,[].concat(a))}),e)}}function p(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var v=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._options=this._handleOptions(e),this._listNode=new u,this._viewport={w:window.innerWidth,h:window.innerHeight},this.render=f(this._render.bind(this),this._options.throttle),this.update(),this.render(),window.addEventListener("resize",f((function(){n._viewport={w:window.innerWidth,h:window.innerHeight}}),this._options.throttle))}var e,n,i;return e=t,n=[{key:"_handleOptions",value:function(t){if(!t)return{preload:1,loading:"",error:"",attempt:3,throttle:300,eventListener:["scroll"]};var e=t.preload,n=t.loading,i=t.error,o=t.attempt,r=t.throttle,a=t.eventListener;return!d(e,"number")&&(e=1),!d(n,"string")&&(n=""),!d(i,"string")&&(i=""),!d(o,"number")&&(o=3),!d(r,"number")&&(r=200),!d(a,"array")&&(a=["scroll"]),{preload:e,loading:n,error:i,attempt:o,throttle:r,eventListener:a}}},{key:"_render",value:function(){var t=this;window.requestAnimationFrame((function(){t._listNode.forEach((function(e){e.load()&&t._listNode.remove(e)}))}))}},{key:"update",value:function(){var t=this,e=this._options;document.querySelectorAll("[data-src]").forEach((function(n){if("IMG"===n.tagName){n.src=t._options.loading;var i=n,o=n.getAttribute("data-src");n.removeAttribute("data-src"),t._listNode.add(new s(i,o,{preload:e.preload,loading:e.loading,error:e.error,attempt:e.attempt,viewport:t._viewport})),e.eventListener.forEach((function(e){(function(t,e,n){for(;t;){try{for(var i=!1,o=0;o<e.length;++o){var r=e[o];if(getComputedStyle(t)[r]===n){i=!0;break}}if(i)break}catch(e){t=t.parentNode;break}t=t.parentNode}return null===t?window:t})(n.parentNode,["overflow","overflow-x","overflow-y"],"scroll").addEventListener(e,t.render)}))}})),this.render()}}],n&&p(e.prototype,n),i&&p(e,i),t}();function y(t){return function(t){if(Array.isArray(t))return m(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return m(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function g(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var b=function(){function t(e,n){var i;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._options=n,this._el=e,this._pos=0,!this._el.firstElementChild)throw new Error("el need a child element");this._box=this._el.firstElementChild,this._box.style.position="relative",this._children=this._box.children,this._heights=[],navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)||window.addEventListener("resize",f(this.reset.bind(this,200),null!==(i=null==n?void 0:n.throttle)&&void 0!==i?i:200))}var e,n,i;return e=t,n=[{key:"_handleOptions",value:function(){var t,e=this._el.clientWidth,n=this._children[0].offsetWidth,i=null!==(t=this._options)&&void 0!==t?t:{},o=i.marginTop,r=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=1;return t<=e+2*n?{line:i,margin:n}:function i(o){if(o<1)return{line:1,margin:n};var r=(t-e*o)/(o+1);return r<n?i(o-1):{line:o,margin:r}}(i=Math.floor(t/e))}(e,n,i.minMargin),a=r.line,s=r.margin;this._margin=s,this._marginTop=null==o?s:o,this._heights=new Array(a).fill(0)}},{key:"_layout",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this._box,n=this._children,i=this._heights,o=this._marginTop,r=this._margin,a=n[0].offsetWidth;this._pos<this._children.length;++this._pos)s(this._pos);function s(s){window.requestAnimationFrame((function(){n[s].style.cssText+="position: absolute;";var l=i.indexOf(Math.min.apply(Math,y(i)));n[s].style.cssText+="\n          transition: all ".concat(t,"ms;\n          transform: translate3d(").concat(r*(l+1)+a*l,"px,").concat(o+i[l],"px,0);\n        "),i[l]+=o+n[s].offsetHeight,e.style.cssText+="\n          height: ".concat(Math.max.apply(Math,y(i))+r,"px;\n          transition: all ").concat(t,"ms;\n        ")}))}}},{key:"reset",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._pos=0,this._handleOptions(),this._layout(t)}},{key:"update",value:function(){this._layout()}}],n&&g(e.prototype,n),i&&g(e,i),t}();const w=function(t,e){var n=e[0].cloneNode(!0),i=e[e.length-1].cloneNode(!0);return t.insertBefore(i,t.firstElementChild),t.appendChild(n),Array.from(t.children)};const _=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;t.style.cssText+="\n        transition: all ".concat(n,"ms;\n        transform: translate3d(").concat(e[0],"%,").concat(e[1],"%,0)\n    ")};function k(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}const E=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.el=e,this.options=n,this.children=[],this.pos=-100,this.point=0,this.changeEvent=[],this.layout(),this.setTimer(),n.bindEvent&&this.bindTouchEvent()}var e,n,i;return e=t,(n=[{key:"layout",value:function(){var t=this.el,e=this.options,n=e.box,i=e.children;t.style.display="none",this.children=w(n,i),t.style.cssText+="\n            overflow: hidden;\n        ",n.style.cssText+="\n            display: flex;\n            transform: translate3d(".concat(this.pos,"%,0,0)\n        "),this.children.forEach((function(t){t.style.cssText+="\n                flex: 1 0 auto;\n                display: block;\n                width: 100%;\n            "})),t.style.display=""}},{key:"change",value:function(){var t=this;window.requestAnimationFrame((function(){var e=t.options,n=e.box,i=e.transition,o=e.children,r=t.changeEvent;return t.pos=-100*t.point-100,_(n,[t.pos,0],i),t.point>=o.length?(t.point=0,t.pos=-100*t.point-100,r.forEach((function(e){return e(t.point)})),void window.setTimeout((function(){_(n,[t.pos,0],0)}),i)):t.point<0?(t.point=o.length-1,t.pos=-100*t.point-100,r.forEach((function(e){return e(t.point)})),void window.setTimeout((function(){_(n,[t.pos,0],0)}),i)):void r.forEach((function(e){return e(t.point)}))}))}},{key:"bindTouchEvent",value:function(){var t=this,e=this.el,n=this.options,i=n.box,o=n.triggerPos;e.addEventListener("touchstart",(function(e){e.preventDefault(),t.clearTimer(),c=u(e.touches[0].pageX)})),e.addEventListener("touchmove",(function(e){h=u(e.touches[0].pageX)-c,_(i,[h+t.pos,0])})),e.addEventListener("touchend",(function(){t.setTimer(),h>=o?--t.point:h<=-o&&++t.point,t.change(),c=0,h=0}));var r=window.getComputedStyle(e),a=e.clientWidth,s=e.getClientRects()[0].left,l=parseFloat(r.borderLeftWidth.substring(0,r.borderLeftWidth.length-2)),c=0,h=0;function u(t){return Math.ceil((t-s-l)/a*100)}}},{key:"onchange",value:function(t){this.changeEvent.push(t)}},{key:"moveChange",value:function(t){"left"===t?--this.point:++this.point,this.change()}},{key:"setTimer",value:function(){var t=this,e=this.options.triggerTime;this.timer=window.setInterval((function(){++t.point,t.change()}),e)}},{key:"clearTimer",value:function(){window.clearInterval(this.timer)}},{key:"update",value:function(t){var e=this.options,n=e.box,i=e.nav,o=this.options,r=this.children;n.removeChild(r[0]),n.removeChild(r[r.length-1]),t(n),o.children=Array.from(n.children),i&&i.layout(o.children.length),this.layout(),this.change()}}])&&k(e.prototype,n),i&&k(e,i),t}();function x(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}const T=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.el=e,this.options=n,this.children=[],this.pos=0,this.point=0,this.changeEvent=[],this.layout(),this.setTimer()}var e,n,i;return e=t,(n=[{key:"layout",value:function(){var t=this.el,e=this.options,n=e.box,i=e.children,o=t.clientHeight;t.style.display="none",this.children=w(n,i),this.pos=-100,t.style.cssText+="\n            position: relative;\n            overflow: hidden;\n        ",n.style.cssText+="\n            transform: translate3d(0,".concat(this.pos,"%,0);\n            height: ").concat(o,"px;\n        "),this.children.forEach((function(t){t.style.cssText+="\n                display: block;\n                height: ".concat(o,"px;\n            ")})),t.style.display=""}},{key:"setTimer",value:function(){var t=this,e=this.options.triggerTime;this.timer=window.setInterval((function(){++t.point,t.change()}),e)}},{key:"change",value:function(){var t=this;window.requestAnimationFrame((function(){var e=t.options,n=e.box,i=e.transition,o=e.children,r=t.changeEvent;return t.pos=-100*t.point-100,_(n,[0,t.pos],i),t.point>=o.length?(t.point=0,t.pos=-100*t.point-100,r.forEach((function(e){return e(t.point)})),void window.setTimeout((function(){_(n,[0,t.pos],0)}),i)):t.point<0?(t.point=o.length-1,t.pos=-100*t.point-100,r.forEach((function(e){return e(t.point)})),void window.setTimeout((function(){_(n,[0,t.pos],0)}),i)):void r.forEach((function(e){return e(t.point)}))}))}},{key:"onchange",value:function(t){this.changeEvent.push(t)}},{key:"moveChange",value:function(t){"left"===t?--this.point:++this.point,this.change()}},{key:"clearTimer",value:function(){window.clearInterval(this.timer)}},{key:"update",value:function(t){var e=this.options,n=e.children,i=e.box,o=e.nav,r=this.options,a=document.createDocumentFragment();n.forEach((function(t){return a.appendChild(t)})),i.innerHTML="",i.appendChild(a),t(i),r.children=Array.from(i.children),o&&o.layout(r.children.length),this.layout(),this.change()}}])&&x(e.prototype,n),i&&x(e,i),t}();function C(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var O="rgba(0,0,0,.3)";const L=function(){function t(e,n){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.update=function(t){for(var e=i.nav.children,n=0;n<i.childLen;++n)e[n].style.backgroundColor=O;e[t].style.backgroundColor="rgba(255,255,255,.8)"};var o=document.createElement("div");o.className+="slide-nav-box",o.style.cssText+="position: relative;",e.appendChild(o),this.el=o,this.childLen=n,this.createNav(),this.update(0)}var e,n,i;return e=t,(n=[{key:"createNav",value:function(){var t,e=this.el,n=this.childLen,i=document.createElement("div"),o=document.createElement("div");e.appendChild(i),t=.02*i.clientWidth,i.className+="slide-nav",i.style.cssText+="\n                display: flex;\n                justify-content: center;\n                align-items: center;\n                position: absolute;\n                left: 0;\n                right: 0;\n                bottom: ".concat(t,"px;\n                z-index: 2;\n            "),function(){var t=.02*i.clientWidth;o.className+="slide-nav-item",o.style.cssText+="\n                width: ".concat(t,"px;\n                height: ").concat(t,"px;\n                margin: 0 ").concat(t,"px;\n                background-color: ").concat(O,";\n                border-radius: 50%;\n            ")}(),function(){for(var t=0;t<n;++t)i.appendChild(o.cloneNode(!0))}(),this.nav=i}},{key:"layout",value:function(t){this.el.removeChild(this.nav),this.childLen=t,this.createNav(),this.update(0)}}])&&C(e.prototype,n),i&&C(e,i),t}();var j,M,P,S=Symbol("handlerOptions"),A=(P=function(t,e){var n=!0,i=!0,o=200,r=3e3,a=10,s=!0;if(d(null==e?void 0:e.transverse,"boolean")&&(n=e.transverse),d(null==e?void 0:e.createNav,"boolean")&&(i=e.createNav),d(null==e?void 0:e.transition,"number")&&(o=e.transition),d(null==e?void 0:e.triggerTime,"number")&&(r=e.triggerTime),d(null==e?void 0:e.triggerPos,"number")&&(a=e.triggerPos),d(null==e?void 0:e.bindEvent,"boolean")&&(s=e.bindEvent),!t.firstElementChild)throw new Error("el need a child element");var l=t.firstElementChild,c=Array.from(l.children);return{nav:i?new L(t,c.length):void 0,box:l,children:c,transverse:n,transition:o,triggerTime:r,triggerPos:a,bindEvent:s}},(M=S)in(j={create:function(t,e){var n=(e=this[S](t,e)).transverse?new E(t,e):new T(t,e);return e.nav&&n.onchange(e.nav.update),n}})?Object.defineProperty(j,M,{value:P,enumerable:!0,configurable:!0,writable:!0}):j[M]=P,j);return e})()}));
//# sourceMappingURL=h.min.js.map